# 梦境 × 塔罗：Notes 时间线（功能设计）

目标：把「梦境解析」从一次性内容升级为**可积累的个人资产**，形成时间线（notes），支持长期回看与复盘。

## 1) 核心设定（今晚 MVP 之后的方向）

- 梦境不是“算命”，而是**心理信号**：用周公解梦（文化语境）+ 塔罗原型（心理原型）做双重解释
- 每条梦境记录都应可保存为一条 note，包含：
  - 梦境原文（用户输入）
  - 匹配牌（牌 id / 名称 / 正逆位）
  - 解析文本（AI 输出）
  - 时间戳、标签（可选：情绪/场景/人物）

## 2) 交互流程（建议）

### 2.1 记录 → 解析

1. 输入梦境（最多 500 字）
2. 系统匹配牌（可解释：为什么这张牌与梦境共振）
3. 生成解析（控制 200~250 字）
4. 展示「保存到梦境时间线」按钮

### 2.2 时间线（Notes）

时间线页（新 tab 或入口）：
- 按时间倒序展示卡片列表
- 每条卡片可展开查看：
  - 梦境原文（折叠）
  - 解析全文
  - 关联牌面（图）
- 支持“同类梦境聚类”（后续）：
  - 按关键词/牌面/情绪标签聚合

### 2.3 复盘（高价值）

每条 note 增加一个「复盘一句话」字段：
- “这周这类梦又出现了，我实际做了什么？”
这会显著提升产品价值与留存。

## 3) 数据策略（与你的偏好对齐）

你倾向：**永久持久化**（不想云端存储）。

建议分层：
- **默认本地永久**（优先）
  - Web：IndexedDB（更适合大量文本）+ 导出 JSON
  - 小程序：`wx.setStorage`（容量有限，需做分页/压缩/最多 N 条）
- **可选 7 天游标缓存**（参考“毒舌吐槽官”）
  - 仅用于跨设备/换机/重装后的短期找回
  - Redis 7 天 TTL，且默认关闭、用户明确同意后启用

## 4) Vercel/架构可行性

Vercel 本身没问题：
- 本地存储完全不依赖 Vercel
- 若要 7 天缓存：用 Redis（你现在项目里已经在用）就够

关键要点：
- 梦境涉及隐私：**默认不上传**，上传必须明确提示
- 若上传，建议在服务端做“加密后存储”（或只存 hash+摘要）

