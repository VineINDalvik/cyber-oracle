# 赛博神算子 · 今晚最简可用版（MVP）

目标：**不要求用户付费**，但可以跑通完整体验，并提供**赞赏码**；同时把模型调用控制在**低 token、低花费**的区间。

## 1. MVP 范围（今晚必须有）

- **Web + 小程序**都能完成以下流程
  - **每日签**：抽牌 → 展示签文 → 查看完整解读
  - **占卜**：选择牌阵/专项主题 → 翻牌 → 查看解读（含“专题三体融合”）
  - **合盘**：双方各抽一张 → 查看合盘解读
  - **解梦**：输入梦境 → 匹配牌 → 查看梦境解读
- **赞赏支持**
  - Web：右上角「☕ 赞赏」弹窗展示二维码
  - 小程序：每页底部「☕ 赞赏支持（点击查看二维码）」预览二维码

## 2. 今晚明确不做（砍掉复杂度）

- 不做任何**付费/支付**流程
- 不做任何“灵力/credits”门禁（UI 与逻辑都旁路）
- 不做云端梦境/合盘/占卜历史（默认本地，不做账号体系）

## 3. 低 token 策略（已落地 + 待优化）

### 3.1 已落地（代码层面）

- `api/divine` 按 mode 降低 `max_tokens` 上限（避免输出过长）
- 付费门禁组件直接放行（不渲染任何支付 UI）

### 3.2 待优化（下一步最值）

- **压缩输入**：把传给模型的“牌义长文本”压成关键词/短句（输入 token 立刻下降）
- **缓存**：
  - 每日签（同一天同牌）可缓存 24h
  - 牌阵/合盘（同一组牌面）可缓存 7 天
  - 梦境解析默认不缓存（涉及隐私），或只缓存哈希键 + 加密内容

## 4. 上线检查清单（最短）

- Web：`npm run build` 通过
- 小程序：微信开发者工具打开 `cyber-oracle-mp/`
  - 4 个 tab 页面都能进入
  - 点击“查看解读”都能返回文本（不出现付费弹窗）
  - 赞赏码可预览
- 线上：
  - `cyber.vinex.top` 可访问（Cloudflare Worker 反代）
  - `/api/divine` 可用（有 key）

